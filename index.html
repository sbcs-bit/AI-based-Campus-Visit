<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>University Voice Navigation Assistant</title>

<style>
:root{
    --primary:#2f80ed;
    --primary-dark:#1f6fe0;
    --bg:#eef2f7;
    --card:#ffffff;
    --text:#1f2937;
    --muted:#6b7280;
    --bot:#f3f4f6;
    --shadow: 0 10px 30px rgba(0,0,0,0.12);
    --radius:18px;
}

*{
    box-sizing:border-box;
}

body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: radial-gradient(circle at top, #f4f8ff, var(--bg));
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 18px;
    color: var(--text);
}

/* Chat container */
.chatbox {
    width: 520px;
    max-width: 96vw;
    height: 78vh;
    min-height: 520px;
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border: 1px solid rgba(0,0,0,0.06);
}

/* Header */
.header {
    background: linear-gradient(135deg, var(--primary), #4aa3ff);
    color: white;
    padding: 16px 18px;
    font-size: 18px;
    font-weight: 700;
    letter-spacing: 0.2px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.header span{
    display:flex;
    align-items:center;
    gap:10px;
}

.badge{
    font-size: 12px;
    padding: 6px 10px;
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.25);
    border-radius: 999px;
}

/* Messages area */
.messages {
    flex: 1;
    padding: 16px;
    overflow-y: auto;
    background: linear-gradient(#ffffff, #fbfcff);
}

.messages::-webkit-scrollbar{
    width: 10px;
}
.messages::-webkit-scrollbar-thumb{
    background: rgba(0,0,0,0.15);
    border-radius: 999px;
}
.messages::-webkit-scrollbar-track{
    background: transparent;
}

/* Message bubbles */
.msg {
    padding: 10px 14px;
    margin: 10px 0;
    border-radius: 14px;
    max-width: 86%;
    font-size: 14.5px;
    line-height: 1.45;
    position: relative;
    word-wrap: break-word;
    white-space: pre-wrap;
}

.user {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    margin-left: auto;
    border-bottom-right-radius: 6px;
    box-shadow: 0 10px 18px rgba(47,128,237,0.22);
}

.bot {
    background: var(--bot);
    color: var(--text);
    margin-right: auto;
    border-bottom-left-radius: 6px;
    border: 1px solid rgba(0,0,0,0.05);
}

/* Video player */
video {
    width: calc(100% - 24px);
    margin: 12px auto;
    display: none;
    border-radius: 14px;
    border: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 10px 22px rgba(0,0,0,0.08);
}

/* Controls */
.controls {
    display: flex;
    gap: 10px;
    padding: 12px;
    border-top: 1px solid rgba(0,0,0,0.08);
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(8px);
}

.inputWrap{
    flex:1;
    display:flex;
    gap:10px;
    align-items:center;
    background:#f7f9ff;
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 999px;
    padding: 8px 12px;
}

input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    padding: 6px 6px;
    font-size: 14.5px;
    color: var(--text);
}

input::placeholder{
    color: #8b93a1;
}

button {
    border: none;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
    border-radius: 999px;
    transition: transform 0.12s ease, background 0.2s ease, opacity 0.2s ease;
}

.btnSend{
    padding: 10px 14px;
    background: var(--primary);
    color: white;
    box-shadow: 0 10px 18px rgba(47,128,237,0.20);
}
.btnSend:hover{
    background: var(--primary-dark);
    transform: translateY(-1px);
}

.btnMic{
    width: 46px;
    height: 46px;
    background: #111827;
    color: white;
}
.btnMic:hover{
    opacity: 0.9;
    transform: translateY(-1px);
}

/* Small helper footer */
.hint{
    font-size: 12px;
    color: var(--muted);
    padding: 0 16px 12px 16px;
    background: linear-gradient(#fbfcff, #ffffff);
}
</style>
</head>

<body>

<div class="chatbox">
    <div class="header">
        <span>AI-based Campus Visit</span>
        <div class="badge">Voice + Chat</div>
    </div>

    <div class="messages" id="messages"></div>

    <video id="videoPlayer" controls></video>

    <div class="hint">Tip: Try ‚Äúbuilding 5‚Äù, ‚Äúbuilding six‚Äù, or ‚ÄúCSE department‚Äù.</div>

    <div class="controls">
        <div class="inputWrap">
            <input id="textInput" placeholder="Ask a question or say building / department..." />
        </div>
        <button class="btnSend" onclick="sendText()">Send</button>
        <button class="btnMic" onclick="startListening()">üé§</button>
    </div>
</div>

<script>
const messages = document.getElementById("messages");
const videoPlayer = document.getElementById("videoPlayer");

videoPlayer.addEventListener("ended", () => {
    videoPlayer.pause();
    videoPlayer.currentTime = 0;
    videoPlayer.src = "";
    videoPlayer.style.display = "none";
});

/* ---------------- Speech Recognition ---------------- */
let recognition;
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (SpeechRecognition) {
    recognition = new SpeechRecognition();
    recognition.lang = "en-US";

    recognition.onresult = (event) => {
        const text = event.results[0][0].transcript;
        addMessage(text, "user");
        processCommand(text);
    };

    recognition.onerror = () => {
        addMessage("Microphone error or permission denied.", "bot");
        speak("Microphone error or permission denied.");
    };
}

/* ---------------- Text to Speech ---------------- */
function speak(text) {
    speechSynthesis.cancel();
    speechSynthesis.speak(new SpeechSynthesisUtterance(text));
}

/* ---------------- UI Helpers ---------------- */
function addMessage(text, sender) {
    const div = document.createElement("div");
    div.className = "msg " + sender;
    div.innerText = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}

function sendText() {
    const input = document.getElementById("textInput");
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, "user");
    input.value = "";
    processCommand(text);
}

/* ‚úÖ ENTER KEY SUPPORT */
document.getElementById("textInput").addEventListener("keydown", function (event) {
    if (event.key === "Enter") {
        event.preventDefault();
        sendText();
    }
});

function startListening() {
    addMessage("Listening...", "bot");
    if (!recognition) {
        addMessage("Speech recognition not supported in this browser.", "bot");
        speak("Speech recognition not supported in this browser.");
        return;
    }
    recognition.start();
}

/* ---------------- Video ---------------- */
function playVideo(file) {
    videoPlayer.src = file;
    videoPlayer.style.display = "block";
    videoPlayer.playbackRate = 2;
    videoPlayer.play();
}

/* ---------------- Knowledge Base ---------------- */
const knowledgeBase = [
    { k:["cyber science"], a:"Cyber Science and Technology is in Satyajit Bhavan, Building 1. Rooms 109 Head of the Department and 110." },
    { k:["english"], a:"English and Literary Studies is in Satyajit Bhavan, Building 1, Room 104." },
    { k:["media", "journalism"], a:"Media Science and Journalism is in Satyajit Bhavan, Building 1, Room 409." },
    { k:["multimedia"], a:"Multimedia department is in Satyajit Bhavan, Building 1, Room 301." },
    { k:["psychology"], a:"Psychology department is in Satyajit Bhavan, Building 1, Room 101." },

    { k:["pharmaceutical", "pharmacy"], a:"Pharmaceutical Technology is in Prafulla Bhavan, Building 3. Rooms 109 Head of the Department and 107." },

    { k:["agriculture"], a:"Agriculture department is in Jagadish Bhavan, Building 4. Rooms 102 Head of the Department and 101." },
    { k:["allied health"], a:"Allied Health Sciences is in Jagadish Bhavan, Building 4. Rooms 207 Head of the Department, 202, 301 and 302." },
    { k:["biotechnology"], a:"Biotechnology department is in Jagadish Bhavan, Building 4, Room 106." },
    { k:["chemistry"], a:"Chemistry department is in Jagadish Bhavan, Building 4, Room 224." },
    { k:["civil"], a:"Civil Engineering is in Jagadish Bhavan, Building 4, Room 004." },
    { k:["electrical"], a:"Electrical Engineering is in Jagadish Bhavan, Building 4, Room 120." },
    { k:["electronics", "ece"], a:"Electronics and Communication Engineering is in Jagadish Bhavan, Building 4, Room 128." },
    { k:["food", "nutrition"], a:"Food and Nutrition department is in Jagadish Bhavan, Building 4, Room 119." },
    { k:["mathematics"], a:"Mathematics department is in Jagadish Bhavan, Building 4. Rooms 328 Head of the Department and 329." },
    { k:["mechanical"], a:"Mechanical Engineering is in Jagadish Bhavan, Building 4, Room 004." },
    { k:["physics"], a:"Physics department is in Jagadish Bhavan, Building 4, Room 225." },

    { k:["computer science", "cse"], a:"Computer Science and Engineering is in Rabindra Bhavan, Building 5. Rooms 105 Head of the Department and 003." },
    { k:["ai"], a:"CSE with Artificial Intelligence is in Rabindra Bhavan, Building 5. Rooms 103 Head of the Department and 104." },
    { k:["data science", "ds"], a:"CSE with Data Science is in Rabindra Bhavan, Building 5, Room 203." },

    { k:["commerce"], a:"Commerce department is in Rammohan Bhavan, Building 6. Rooms 613 Head of the Department and 616." },
    { k:["computational"], a:"Computational Sciences is in Rammohan Bhavan, Building 6. Rooms 306 Head of the Department Dr. Jayanta Aich, 303 and 305." },
    { k:["css"], a:"Computational Sciences is in Rammohan Bhavan, Building 6. Rooms 306 Head of the Department Dr. Jayanta Aich, 303 and 305." },
    { k:["hospital"], a:"Hospital Management is in Rammohan Bhavan, Building 6, Room 701." },
    { k:["law"], a:"Law department is in Rammohan Bhavan, Building 6. Rooms 105 Head of the Department and 106." },
    { k:["management"], a:"Management department is in Rammohan Bhavan, Building 6. Rooms 505 Head of the Department and 503." },

    { k:["nursing"], a:"Institute of Nursing is in Vivekananda Bhavan, Building 9. Rooms 008 Principal, 009 and 010." },
    /* ---------------- Complete University Directory (From Excel) ---------------- */


    /* ---------- Academic & Statutory Authorities ---------- */
    {
        k: ["vice chancellor", "vc"],
        a: "Vice Chancellor is Dr. Sankar Gangopadhyay. Phone number 9239305470. Email vc@brainwareuniversity.ac.in."
    },
    {
        k: ["senior pro vice chancellor", "pro vc academics"],
        a: "Senior Pro Vice Chancellor Academics is Prof. Dr. Debendra Kumar Panda. Phone number 9893973341. Email srprovc@brainwareuniversity.ac.in."
    },
    {
        k: ["registrar"],
        a: "Registrar Acting is Dr. Swaraj Kumar Sarkar. Phone number 9830498034. Email registrar@brainwareuniversity.ac.in."
    },
    {
        k: ["dean academics"],
        a: "Dean Academics is Dr. Anant Kumar Srivastava. Phone number 8126471204. Email dean.academics@brainwareuniversity.ac.in."
    },
    {
        k: ["dean students welfare", "students welfare"],
        a: "Dean Students Welfare is Dr. Anup Kumar Maiti. Phone number 9123881934. Email dean.students@brainwareuniversity.ac.in."
    },

    /* ---------- Heads of Departments (HOD) ---------- */
{
    k: ["hod agriculture"],
    a: "HOD of Agriculture is Dr. Soham Hazra. Phone 7278357829. Email hod.ag@brainwareuniversity.ac.in."
},
{
    k: ["hod allied health sciences", "hod allied health"],
    a: "HOD of Allied Health Sciences is Dr. Abhishek Jana. Phone 9775174928. Email hod.ah@brainwareuniversity.ac.in."
},
{
    k: ["hod biotechnology"],
    a: "HOD of Biotechnology is Dr. Sayantan Ghosh. Phone 8017646044. Email hod.bt@brainwareuniversity.ac.in."
},
{
    k: ["hod chemistry"],
    a: "HOD of Chemistry is Dr. Sayanti Datta. Phone 9474066078. Email hod.chem@brainwareuniversity.ac.in."
},
{
    k: ["hod civil engineering", "hod civil"],
    a: "HOD of Civil Engineering is Soumi Dey. Phone 8697487960. Email hod.ce@brainwareuniversity.ac.in."
},
{
    k: ["hod commerce"],
    a: "HOD of Commerce can be contacted at hod.comm@brainwareuniversity.ac.in."
},
{
    k: ["hod computational sciences", "hod css"],
    a: "HOD of Computational Sciences is Dr. Jayanta Aich. Phone 7003401453. Email hod.css@brainwareuniversity.ac.in."
},
{
    k: ["hod computer science and engineering", "hod cse"],
    a: "HOD of Computer Science and Engineering is Dr. Avijit Kumar Chaudhuri. Phone 9432254912. Email hod.csengg@brainwareuniversity.ac.in."
},
{
    k: ["hod cse ai", "hod artificial intelligence"],
    a: "HOD of CSE with Artificial Intelligence is Dr. Shivnath Ghosh. Phone 9660212732. Email hod.cseai@brainwareuniversity.ac.in."
},
{
    k: ["hod cse data science", "hod cs ds"],
    a: "HOD of CSE (CS & Data Science) is Dr. Supriya Chakraborty. Phone 9339667210. Email hod.csecsds@brainwareuniversity.ac.in."
},
{
    k: ["hod cyber science"],
    a: "HOD of Cyber Science and Technology is Anirban Lahiri. Phone 9831611579. Email hod.cst@brainwareuniversity.ac.in."
},
{
    k: ["hod electrical engineering", "hod ee"],
    a: "HOD of Electrical Engineering is Dr. Subhajit Mukherjee. Phone 9051498346. Email hod.ee@brainwareuniversity.ac.in."
},
{
    k: ["hod electronics", "hod ece"],
    a: "HOD of Electronics and Communication Engineering is Dr. Angshuman Majumdar. Phone 9831609600. Email hod.ece@brainwareuniversity.ac.in."
},
{
    k: ["hod english"],
    a: "HOD of English and Literary Studies is Dr. Thameemul Ansari. Phone 7373627002. Email hod.hu@brainwareuniversity.ac.in."
},
{
    k: ["hod food and nutrition"],
    a: "HOD of Food and Nutrition is Dr. Laavanya Das. Phone 8981016819. Email hod.fnt@brainwareuniversity.ac.in."
},
{
    k: ["hod hospital management"],
    a: "HOD of Hospital Management is Dr. Sourav Gangopadhyay. Phone 9830601451. Email hod.hm@brainwareuniversity.ac.in."
},
{
    k: ["hod law"],
    a: "HOD of Law is Dr. Kaushik Banerjee. Phone 8296029146. Email hod.law@brainwareuniversity.ac.in."
},
{
    k: ["hod management"],
    a: "HOD of Management is Dr. Saileswar Ghosh. Phone 9319292219. Email hod.management@brainwareuniversity.ac.in."
},
{
    k: ["hod mathematics"],
    a: "HOD of Mathematics is Surath Roy. Phone 7003831413. Email hod.math@brainwareuniversity.ac.in."
},
{
    k: ["hod mechanical engineering", "hod me"],
    a: "HOD of Mechanical Engineering is Gourab Chakraborty. Phone 9088448833. Email hod.me@brainwareuniversity.ac.in."
},
{
    k: ["hod media science", "hod journalism"],
    a: "HOD of Media Science and Journalism is Jennifer Shaheen Hussain. Phone 8812821350. Email hod.msj@brainwareuniversity.ac.in."
},
{
    k: ["hod multimedia"],
    a: "HOD of Multimedia is Sandip Bhattacharjee. Phone 9830017429. Email hod.mm@brainwareuniversity.ac.in."
},
{
    k: ["hod pharmaceutical technology", "hod pharmacy"],
    a: "HOD of Pharmaceutical Technology is Dr. Prasenjit Mondal. Phone 9398015746. Email hod.pt@brainwareuniversity.ac.in."
},
{
    k: ["hod physics"],
    a: "HOD of Physics is Dr. Soumyajit Sarkar. Phone 6289141855. Email hod.ph@brainwareuniversity.ac.in."
},
{
    k: ["hod psychology"],
    a: "HOD of Psychology is Dr. Alok Kumar Chowdhury. Phone 6306492616. Email hod.psy@brainwareuniversity.ac.in."
},
{
    k: ["hod group mail"],
    a: "HOD Group Mail ID is bwuhod@brainwareuniversity.ac.in."
},

    /* ---------- Non-Academic Officers ---------- */
    {
        k: ["controller of examinations", "coe"],
        a: "Controller of Examinations can be contacted at coe@brainwareuniversity.ac.in."
    },
    {
        k: ["deputy registrar"],
        a: "Deputy Registrar can be contacted at dr@brainwareuniversity.ac.in."
    },
    {
        k: ["assistant registrar"],
        a: "Assistant Registrar can be contacted at ar@brainwareuniversity.ac.in."
    },
    {
        k: ["accounts officer"],
        a: "Accounts Officer can be contacted at accounts@brainwareuniversity.ac.in."
    },
    {
        k: ["finance officer"],
        a: "Finance Office can be contacted at bwufin@brainwareuniversity.ac.in."
    },
    {
        k: ["hr department", "human resources"],
        a: "Human Resources Department email is hr@brainwareuniversity.ac.in."
    },
    {
        k: ["purchase department"],
        a: "Purchase Department email is purchase@brainwareuniversity.ac.in."
    },
    {
        k: ["estate office"],
        a: "Estate Office can be contacted at estate@brainwareuniversity.ac.in."
    },
    {
        k: ["it cell"],
        a: "IT Cell email is itcell@brainwareuniversity.ac.in."
    },
    {
        k: ["library"],
        a: "Central Library email is library@brainwareuniversity.ac.in."
    },
    {
        k: ["hostel office"],
        a: "Hostel Office email is hostel@brainwareuniversity.ac.in."
    },
    {
        k: ["transport office"],
        a: "Transport Office email is transport@brainwareuniversity.ac.in."
    },
    {
        k: ["training and placement", "tpo"],
        a: "Training and Placement Office email is bwutpo@brainwareuniversity.ac.in."
    },
    {
        k: ["examination cell"],
        a: "Examination Cell email is exam@brainwareuniversity.ac.in."
    },

    /* ---------- Administrative & Support Units ---------- */
    {
        k: ["administration office"],
        a: "Administration Office email is bwuadmin@brainwareuniversity.ac.in."
    },
    {
        k: ["legal cell"],
        a: "Legal Cell email is bwulegal@brainwareuniversity.ac.in."
    },
    {
        k: ["admission office"],
        a: "Admission Office email is bwuadmission@brainwareuniversity.ac.in."
    },
    {
        k: ["research centre", "ciri"],
        a: "Centre of Interdisciplinary Research and Innovation email is bwuciri@brainwareuniversity.ac.in."
    },

    /* ---------- Group Mail IDs (From Excel Tail Section) ---------- */
    {
        k: ["admin group mail"],
        a: "Administration Group Mail ID is bwuadmin@brainwareuniversity.ac.in."
    },
    {
        k: ["finance group mail"],
        a: "Finance Group Mail ID is bwufin@brainwareuniversity.ac.in."
    },
    {
        k: ["legal group mail"],
        a: "Legal Cell Group Mail ID is bwulegal@brainwareuniversity.ac.in."
    },
    {
        k: ["admission group mail"],
        a: "Admission Group Mail ID is bwuadmission@brainwareuniversity.ac.in."
    },
    {
        k: ["ciri group mail"],
        a: "Centre of Interdisciplinary Research and Innovation Group Mail ID is bwuciri@brainwareuniversity.ac.in."
    }

];

/* ---------------- Number Word Normalization ---------------- */
const wordToNumber = {
    one: "1",
    two: "2",
    three: "3",
    four: "4",
    five: "5",
    six: "6",
    seven: "7",
    eight: "8",
    nine: "9"
};

function normalizeInput(text) {
    return text.toLowerCase().replace(
        /\b(one|two|three|four|five|six|seven|eight|nine)\b/g,
        match => wordToNumber[match]
    );
}

/* ---------------- Main Logic ---------------- */
function processCommand(text) {
    const input = normalizeInput(text);
    const bMatch = input.match(/\bbuilding\s*([1-9])\b|\b([1-9])\b/);

    if (bMatch) {
        const b = bMatch[1] || bMatch[2];
        const reply = `Showing directions to Building ${b}.`;
        playVideo(`${b}.mp4`);
        addMessage(reply, "bot");
        speak(reply);
        return;
    }

    for (const item of knowledgeBase) {
        if (item.k.some(key => input.includes(key))) {
            addMessage(item.a, "bot");
            speak(item.a);
            return;
        }
    }

    const fallback = "I can help with department locations, room numbers, and building navigation.";
    addMessage(fallback, "bot");
    speak(fallback);
}
</script>

</body>
</html>
